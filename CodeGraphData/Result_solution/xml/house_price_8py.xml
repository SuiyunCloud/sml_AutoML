<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.6">
  <compounddef id="house_price_8py" kind="file">
    <compoundname>housePrice.py</compoundname>
    <innernamespace refid="namespacehouse_price">housePrice</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespacehouse_price" refkind="compound"><highlight class="keyword">import</highlight><highlight class="normal"><sp/>numpy<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>np<sp/></highlight><highlight class="comment">#<sp/>linear<sp/>algebra</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>pandas<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>pd<sp/></highlight><highlight class="comment">#<sp/>data<sp/>processing,<sp/>CSV<sp/>file<sp/>I/O<sp/>(e.g.<sp/>pd.read_csv)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>matplotlib.pyplot<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>plt<sp/><sp/></highlight><highlight class="comment">#<sp/>Matlab-style<sp/>plotting</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>seaborn<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>sns</highlight></codeline>
<codeline lineno="5" refid="namespacehouse_price_1a7353ee4f25aff5487633cdd316332b15" refkind="member"><highlight class="normal">color<sp/>=<sp/>sns.color_palette()</highlight></codeline>
<codeline lineno="6"><highlight class="normal">sns.set_style(</highlight><highlight class="stringliteral">&apos;darkgrid&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>warnings</highlight></codeline>
<codeline lineno="8" refid="namespacehouse_price_1a81fd6e447f9fa31185aa751f47ec0c81" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacehouse_price_1a81fd6e447f9fa31185aa751f47ec0c81" kindref="member">ignore_warn</ref>(*args,<sp/>**kwargs):</highlight></codeline>
<codeline lineno="9"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal">warnings.warn<sp/>=<sp/>ignore_warn<sp/></highlight><highlight class="comment">#ignore<sp/>annoying<sp/>warning<sp/>(from<sp/>sklearn<sp/>and<sp/>seaborn)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>scipy<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>stats</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>scipy.stats<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>norm,<sp/>skew<sp/></highlight><highlight class="comment">#for<sp/>some<sp/>statistics</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal">pd.set_option(</highlight><highlight class="stringliteral">&apos;display.float_format&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>x:<sp/></highlight><highlight class="stringliteral">&apos;{:.3f}&apos;</highlight><highlight class="normal">.format(x))<sp/></highlight><highlight class="comment">#Limiting<sp/>floats<sp/>output<sp/>to<sp/>3<sp/>decimal<sp/>points</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>numpy<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>np</highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>pandas<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>pd</highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>sklearn.ensemble<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>RandomForestRegressor</highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="comment">#<sp/>Read<sp/>the<sp/>data</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22" refid="namespacehouse_price_1a1367f878d9de350296acd692a7aaea8f" refkind="member"><highlight class="normal">train<sp/>=<sp/>pd.read_csv(</highlight><highlight class="stringliteral">&apos;C:\\Users\\suiyun.yang\\Desktop\\Kaggle\\datasets\\Kaggle\\HousePrice\\train.csv&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="comment">#<sp/>Read<sp/>the<sp/>test<sp/>data</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24" refid="namespacehouse_price_1a2b02eb042737f62fb8e346acc8cf0dfb" refkind="member"><highlight class="normal">test<sp/>=<sp/>pd.read_csv(</highlight><highlight class="stringliteral">&apos;C:\\Users\\suiyun.yang\\Desktop\\Kaggle\\datasets\\Kaggle\\HousePrice\\test.csv&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="comment">#Deleting<sp/>outliers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal">train<sp/>=<sp/>train.drop(train[(train[</highlight><highlight class="stringliteral">&apos;GrLivArea&apos;</highlight><highlight class="normal">]&gt;4000)<sp/>&amp;<sp/>(train[</highlight><highlight class="stringliteral">&apos;SalePrice&apos;</highlight><highlight class="normal">]&lt;300000)].index)</highlight></codeline>
<codeline lineno="30" refid="namespacehouse_price_1aea1111b00ab2af155801de42ab08406a" refkind="member"><highlight class="normal">y<sp/>=<sp/>train.SalePrice</highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>seaborn<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>sns</highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>scipy.stats<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>norm</highlight></codeline>
<codeline lineno="34"><highlight class="normal">(mu,sigma)<sp/>=<sp/>norm.fit(y)</highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>scipy<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>stats</highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal">y<sp/>=<sp/>np.log1p(y)</highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight></codeline>
<codeline lineno="41" refid="namespacehouse_price_1a08bc6fa4c486cdaf066a15165f894eab" refkind="member"><highlight class="normal">ntrain<sp/>=<sp/>train.shape[0]</highlight></codeline>
<codeline lineno="42" refid="namespacehouse_price_1ac95c5f5478628a83299f588f8add0908" refkind="member"><highlight class="normal">ntest<sp/>=<sp/>test.shape[0]</highlight></codeline>
<codeline lineno="43" refid="namespacehouse_price_1af3c467aca8b8c67a0457d9854d735982" refkind="member"><highlight class="normal">y_train<sp/>=<sp/>train.SalePrice.values</highlight></codeline>
<codeline lineno="44" refid="namespacehouse_price_1aa63f9dbc4aad5d7d8746fa37294a7d0b" refkind="member"><highlight class="normal">data<sp/>=<sp/>train.append(test).reset_index(drop=</highlight><highlight class="keyword">True</highlight><highlight class="normal">)<sp/></highlight><highlight class="comment">#两个数据集中的索引有重叠，重建索引</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal">data.drop([</highlight><highlight class="stringliteral">&apos;SalePrice&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;Id&apos;</highlight><highlight class="normal">],axis=1,inplace=</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight><highlight class="comment">#<sp/>Encode<sp/>some<sp/>categorical<sp/>features<sp/>as<sp/>ordered<sp/>numbers<sp/>when<sp/>there<sp/>is<sp/>information<sp/>in<sp/>the<sp/>or</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal">data<sp/>=<sp/>data.replace({</highlight><highlight class="stringliteral">&quot;Alley&quot;</highlight><highlight class="normal"><sp/>:<sp/>{</highlight><highlight class="stringliteral">&quot;Grvl&quot;</highlight><highlight class="normal"><sp/>:<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Pave&quot;</highlight><highlight class="normal"><sp/>:<sp/>2},</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;BsmtCond&quot;</highlight><highlight class="normal"><sp/>:<sp/>{</highlight><highlight class="stringliteral">&quot;No&quot;</highlight><highlight class="normal"><sp/>:<sp/>0,<sp/></highlight><highlight class="stringliteral">&quot;Po&quot;</highlight><highlight class="normal"><sp/>:<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Fa&quot;</highlight><highlight class="normal"><sp/>:<sp/>2,<sp/></highlight><highlight class="stringliteral">&quot;TA&quot;</highlight><highlight class="normal"><sp/>:<sp/>3,<sp/></highlight><highlight class="stringliteral">&quot;Gd&quot;</highlight><highlight class="normal"><sp/>:<sp/>4,<sp/></highlight><highlight class="stringliteral">&quot;Ex&quot;</highlight><highlight class="normal"><sp/>:<sp/>5},</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;BsmtExposure&quot;</highlight><highlight class="normal"><sp/>:<sp/>{</highlight><highlight class="stringliteral">&quot;No&quot;</highlight><highlight class="normal"><sp/>:<sp/>0,<sp/></highlight><highlight class="stringliteral">&quot;Mn&quot;</highlight><highlight class="normal"><sp/>:<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Av&quot;</highlight><highlight class="normal">:<sp/>2,<sp/></highlight><highlight class="stringliteral">&quot;Gd&quot;</highlight><highlight class="normal"><sp/>:<sp/>3},</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;BsmtFinType1&quot;</highlight><highlight class="normal"><sp/>:<sp/>{</highlight><highlight class="stringliteral">&quot;No&quot;</highlight><highlight class="normal"><sp/>:<sp/>0,<sp/></highlight><highlight class="stringliteral">&quot;Unf&quot;</highlight><highlight class="normal"><sp/>:<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;LwQ&quot;</highlight><highlight class="normal">:<sp/>2,<sp/></highlight><highlight class="stringliteral">&quot;Rec&quot;</highlight><highlight class="normal"><sp/>:<sp/>3,<sp/></highlight><highlight class="stringliteral">&quot;BLQ&quot;</highlight><highlight class="normal"><sp/>:<sp/>4,<sp/></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;ALQ&quot;</highlight><highlight class="normal"><sp/>:<sp/>5,<sp/></highlight><highlight class="stringliteral">&quot;GLQ&quot;</highlight><highlight class="normal"><sp/>:<sp/>6},</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;BsmtFinType2&quot;</highlight><highlight class="normal"><sp/>:<sp/>{</highlight><highlight class="stringliteral">&quot;No&quot;</highlight><highlight class="normal"><sp/>:<sp/>0,<sp/></highlight><highlight class="stringliteral">&quot;Unf&quot;</highlight><highlight class="normal"><sp/>:<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;LwQ&quot;</highlight><highlight class="normal">:<sp/>2,<sp/></highlight><highlight class="stringliteral">&quot;Rec&quot;</highlight><highlight class="normal"><sp/>:<sp/>3,<sp/></highlight><highlight class="stringliteral">&quot;BLQ&quot;</highlight><highlight class="normal"><sp/>:<sp/>4,<sp/></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;ALQ&quot;</highlight><highlight class="normal"><sp/>:<sp/>5,<sp/></highlight><highlight class="stringliteral">&quot;GLQ&quot;</highlight><highlight class="normal"><sp/>:<sp/>6},</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;BsmtQual&quot;</highlight><highlight class="normal"><sp/>:<sp/>{</highlight><highlight class="stringliteral">&quot;No&quot;</highlight><highlight class="normal"><sp/>:<sp/>0,<sp/></highlight><highlight class="stringliteral">&quot;Po&quot;</highlight><highlight class="normal"><sp/>:<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Fa&quot;</highlight><highlight class="normal"><sp/>:<sp/>2,<sp/></highlight><highlight class="stringliteral">&quot;TA&quot;</highlight><highlight class="normal">:<sp/>3,<sp/></highlight><highlight class="stringliteral">&quot;Gd&quot;</highlight><highlight class="normal"><sp/>:<sp/>4,<sp/></highlight><highlight class="stringliteral">&quot;Ex&quot;</highlight><highlight class="normal"><sp/>:<sp/>5},</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;ExterCond&quot;</highlight><highlight class="normal"><sp/>:<sp/>{</highlight><highlight class="stringliteral">&quot;Po&quot;</highlight><highlight class="normal"><sp/>:<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Fa&quot;</highlight><highlight class="normal"><sp/>:<sp/>2,<sp/></highlight><highlight class="stringliteral">&quot;TA&quot;</highlight><highlight class="normal">:<sp/>3,<sp/></highlight><highlight class="stringliteral">&quot;Gd&quot;</highlight><highlight class="normal">:<sp/>4,<sp/></highlight><highlight class="stringliteral">&quot;Ex&quot;</highlight><highlight class="normal"><sp/>:<sp/>5},</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;ExterQual&quot;</highlight><highlight class="normal"><sp/>:<sp/>{</highlight><highlight class="stringliteral">&quot;Po&quot;</highlight><highlight class="normal"><sp/>:<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Fa&quot;</highlight><highlight class="normal"><sp/>:<sp/>2,<sp/></highlight><highlight class="stringliteral">&quot;TA&quot;</highlight><highlight class="normal">:<sp/>3,<sp/></highlight><highlight class="stringliteral">&quot;Gd&quot;</highlight><highlight class="normal">:<sp/>4,<sp/></highlight><highlight class="stringliteral">&quot;Ex&quot;</highlight><highlight class="normal"><sp/>:<sp/>5},</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;FireplaceQu&quot;</highlight><highlight class="normal"><sp/>:<sp/>{</highlight><highlight class="stringliteral">&quot;No&quot;</highlight><highlight class="normal"><sp/>:<sp/>0,<sp/></highlight><highlight class="stringliteral">&quot;Po&quot;</highlight><highlight class="normal"><sp/>:<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Fa&quot;</highlight><highlight class="normal"><sp/>:<sp/>2,<sp/></highlight><highlight class="stringliteral">&quot;TA&quot;</highlight><highlight class="normal"><sp/>:<sp/>3,<sp/></highlight><highlight class="stringliteral">&quot;Gd&quot;</highlight><highlight class="normal"><sp/>:<sp/>4,<sp/></highlight><highlight class="stringliteral">&quot;Ex&quot;</highlight><highlight class="normal"><sp/>:<sp/>5},</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Functional&quot;</highlight><highlight class="normal"><sp/>:<sp/>{</highlight><highlight class="stringliteral">&quot;Sal&quot;</highlight><highlight class="normal"><sp/>:<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Sev&quot;</highlight><highlight class="normal"><sp/>:<sp/>2,<sp/></highlight><highlight class="stringliteral">&quot;Maj2&quot;</highlight><highlight class="normal"><sp/>:<sp/>3,<sp/></highlight><highlight class="stringliteral">&quot;Maj1&quot;</highlight><highlight class="normal"><sp/>:<sp/>4,<sp/></highlight><highlight class="stringliteral">&quot;Mod&quot;</highlight><highlight class="normal">:<sp/>5,<sp/></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Min2&quot;</highlight><highlight class="normal"><sp/>:<sp/>6,<sp/></highlight><highlight class="stringliteral">&quot;Min1&quot;</highlight><highlight class="normal"><sp/>:<sp/>7,<sp/></highlight><highlight class="stringliteral">&quot;Typ&quot;</highlight><highlight class="normal"><sp/>:<sp/>8},</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;GarageCond&quot;</highlight><highlight class="normal"><sp/>:<sp/>{</highlight><highlight class="stringliteral">&quot;No&quot;</highlight><highlight class="normal"><sp/>:<sp/>0,<sp/></highlight><highlight class="stringliteral">&quot;Po&quot;</highlight><highlight class="normal"><sp/>:<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Fa&quot;</highlight><highlight class="normal"><sp/>:<sp/>2,<sp/></highlight><highlight class="stringliteral">&quot;TA&quot;</highlight><highlight class="normal"><sp/>:<sp/>3,<sp/></highlight><highlight class="stringliteral">&quot;Gd&quot;</highlight><highlight class="normal"><sp/>:<sp/>4,<sp/></highlight><highlight class="stringliteral">&quot;Ex&quot;</highlight><highlight class="normal"><sp/>:<sp/>5},</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;GarageQual&quot;</highlight><highlight class="normal"><sp/>:<sp/>{</highlight><highlight class="stringliteral">&quot;No&quot;</highlight><highlight class="normal"><sp/>:<sp/>0,<sp/></highlight><highlight class="stringliteral">&quot;Po&quot;</highlight><highlight class="normal"><sp/>:<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Fa&quot;</highlight><highlight class="normal"><sp/>:<sp/>2,<sp/></highlight><highlight class="stringliteral">&quot;TA&quot;</highlight><highlight class="normal"><sp/>:<sp/>3,<sp/></highlight><highlight class="stringliteral">&quot;Gd&quot;</highlight><highlight class="normal"><sp/>:<sp/>4,<sp/></highlight><highlight class="stringliteral">&quot;Ex&quot;</highlight><highlight class="normal"><sp/>:<sp/>5},</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;HeatingQC&quot;</highlight><highlight class="normal"><sp/>:<sp/>{</highlight><highlight class="stringliteral">&quot;Po&quot;</highlight><highlight class="normal"><sp/>:<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Fa&quot;</highlight><highlight class="normal"><sp/>:<sp/>2,<sp/></highlight><highlight class="stringliteral">&quot;TA&quot;</highlight><highlight class="normal"><sp/>:<sp/>3,<sp/></highlight><highlight class="stringliteral">&quot;Gd&quot;</highlight><highlight class="normal"><sp/>:<sp/>4,<sp/></highlight><highlight class="stringliteral">&quot;Ex&quot;</highlight><highlight class="normal"><sp/>:<sp/>5},</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;KitchenQual&quot;</highlight><highlight class="normal"><sp/>:<sp/>{</highlight><highlight class="stringliteral">&quot;Po&quot;</highlight><highlight class="normal"><sp/>:<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Fa&quot;</highlight><highlight class="normal"><sp/>:<sp/>2,<sp/></highlight><highlight class="stringliteral">&quot;TA&quot;</highlight><highlight class="normal"><sp/>:<sp/>3,<sp/></highlight><highlight class="stringliteral">&quot;Gd&quot;</highlight><highlight class="normal"><sp/>:<sp/>4,<sp/></highlight><highlight class="stringliteral">&quot;Ex&quot;</highlight><highlight class="normal"><sp/>:<sp/>5},</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;LandSlope&quot;</highlight><highlight class="normal"><sp/>:<sp/>{</highlight><highlight class="stringliteral">&quot;Sev&quot;</highlight><highlight class="normal"><sp/>:<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Mod&quot;</highlight><highlight class="normal"><sp/>:<sp/>2,<sp/></highlight><highlight class="stringliteral">&quot;Gtl&quot;</highlight><highlight class="normal"><sp/>:<sp/>3},</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;LotShape&quot;</highlight><highlight class="normal"><sp/>:<sp/>{</highlight><highlight class="stringliteral">&quot;IR3&quot;</highlight><highlight class="normal"><sp/>:<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;IR2&quot;</highlight><highlight class="normal"><sp/>:<sp/>2,<sp/></highlight><highlight class="stringliteral">&quot;IR1&quot;</highlight><highlight class="normal"><sp/>:<sp/>3,<sp/></highlight><highlight class="stringliteral">&quot;Reg&quot;</highlight><highlight class="normal"><sp/>:<sp/>4},</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;PavedDrive&quot;</highlight><highlight class="normal"><sp/>:<sp/>{</highlight><highlight class="stringliteral">&quot;N&quot;</highlight><highlight class="normal"><sp/>:<sp/>0,<sp/></highlight><highlight class="stringliteral">&quot;P&quot;</highlight><highlight class="normal"><sp/>:<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Y&quot;</highlight><highlight class="normal"><sp/>:<sp/>2},</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;PoolQC&quot;</highlight><highlight class="normal"><sp/>:<sp/>{</highlight><highlight class="stringliteral">&quot;No&quot;</highlight><highlight class="normal"><sp/>:<sp/>0,<sp/></highlight><highlight class="stringliteral">&quot;Fa&quot;</highlight><highlight class="normal"><sp/>:<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;TA&quot;</highlight><highlight class="normal"><sp/>:<sp/>2,<sp/></highlight><highlight class="stringliteral">&quot;Gd&quot;</highlight><highlight class="normal"><sp/>:<sp/>3,<sp/></highlight><highlight class="stringliteral">&quot;Ex&quot;</highlight><highlight class="normal"><sp/>:<sp/>4},</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Street&quot;</highlight><highlight class="normal"><sp/>:<sp/>{</highlight><highlight class="stringliteral">&quot;Grvl&quot;</highlight><highlight class="normal"><sp/>:<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Pave&quot;</highlight><highlight class="normal"><sp/>:<sp/>2},</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Utilities&quot;</highlight><highlight class="normal"><sp/>:<sp/>{</highlight><highlight class="stringliteral">&quot;ELO&quot;</highlight><highlight class="normal"><sp/>:<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;NoSeWa&quot;</highlight><highlight class="normal"><sp/>:<sp/>2,<sp/></highlight><highlight class="stringliteral">&quot;NoSewr&quot;</highlight><highlight class="normal"><sp/>:<sp/>3,<sp/></highlight><highlight class="stringliteral">&quot;AllPub&quot;</highlight><highlight class="normal"><sp/>:<sp/>4}}</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="76" refid="namespacehouse_price_1a69a0a412ee71a82cd4c7c67086d1b49b" refkind="member"><highlight class="normal">data_na<sp/>=<sp/>data.isnull().sum()/len(data)<sp/>*<sp/>100</highlight></codeline>
<codeline lineno="77"><highlight class="normal">data_na<sp/>=<sp/>data_na.drop(data_na[data_na<sp/>==<sp/>0].index).sort_values(ascending=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="78"><highlight class="normal">data_na[:30]</highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight></codeline>
<codeline lineno="81" refid="namespacehouse_price_1a2b0a00685062f831e0845fe31a73372a" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacehouse_price_1a2b0a00685062f831e0845fe31a73372a" kindref="member">fill_na</ref>(items,value):</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>item<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>items:</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[item]<sp/>=<sp/>data[item].fillna(value)</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="85" refid="namespacehouse_price_1a0be6b4ef729fb48e16a608bed8bf9b52" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacehouse_price_1a0be6b4ef729fb48e16a608bed8bf9b52" kindref="member">fill_na_with_mode</ref>(items):</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>item<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>items:</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[item]<sp/>=<sp/>data[item].fillna(data[item].<ref refid="namespacemodule1_1aea3cdae47dbb141c32ac55f3164175e9" kindref="member">mode</ref>()[0])</highlight></codeline>
<codeline lineno="88"><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"></highlight></codeline>
<codeline lineno="90"><highlight class="normal"></highlight></codeline>
<codeline lineno="91"><highlight class="normal">data_na<sp/>=<sp/>data.isnull().sum()/len(data)<sp/>*<sp/>100</highlight></codeline>
<codeline lineno="92"><highlight class="normal">data_na<sp/>=<sp/>data_na.drop(data_na[data_na<sp/>==<sp/>0].index).sort_values(ascending=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="93"><highlight class="normal">data_na[:30]</highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight></codeline>
<codeline lineno="96" refid="namespacehouse_price_1a9006021d0d5a7fc92b1b1a7b3df62202" refkind="member"><highlight class="normal">items1<sp/>=<sp/>[</highlight><highlight class="stringliteral">&apos;PoolQC&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;MiscFeature&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;Alley&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;Fence&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;FireplaceQu&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;Fence&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;BsmtCond&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;BsmtExposure&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;BsmtFinType1&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;BsmtFinType2&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;BsmtQual&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;MasVnrType&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;GarageCond&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;GarageFinish&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;GarageQual&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;GarageType&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><ref refid="namespacehouse_price_1a2b0a00685062f831e0845fe31a73372a" kindref="member">fill_na</ref>(items1,</highlight><highlight class="stringliteral">&quot;None&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="100" refid="namespacehouse_price_1ad8da855e3ec621edf9cacd91e486e78a" refkind="member"><highlight class="normal">items2<sp/>=<sp/>[</highlight><highlight class="stringliteral">&apos;GarageYrBlt&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;GarageArea&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;GarageCars&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;BsmtFinSF1&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;BsmtFinSF2&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;TotalBsmtSF&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;BsmtFinType2&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;BsmtFullBath&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;BsmtHalfBath&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;MasVnrArea&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;BsmtUnfSF&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><ref refid="namespacehouse_price_1a2b0a00685062f831e0845fe31a73372a" kindref="member">fill_na</ref>(items2,0)</highlight></codeline>
<codeline lineno="103"><highlight class="normal"></highlight><highlight class="comment">#用中值填充</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal">data[</highlight><highlight class="stringliteral">&quot;LotFrontage&quot;</highlight><highlight class="normal">]<sp/>=<sp/>data.groupby(</highlight><highlight class="stringliteral">&apos;Neighborhood&apos;</highlight><highlight class="normal">)[</highlight><highlight class="stringliteral">&quot;LotFrontage&quot;</highlight><highlight class="normal">].transform(</highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>x<sp/>:x.fillna(x.median()))</highlight></codeline>
<codeline lineno="105"><highlight class="normal"></highlight><highlight class="comment">#用众数填充</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight><highlight class="comment">#item3<sp/>=<sp/>[<sp/>&apos;MSZoning&apos;,&apos;Electrical&apos;,&apos;Exterior1st&apos;,&apos;Exterior2nd&apos;,&apos;SaleType&apos;,&apos;KitchenQual&apos;]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="107" refid="namespacehouse_price_1ad31d6e99543c8ae3994d5d532f16b1ef" refkind="member"><highlight class="normal">item3<sp/>=<sp/>[<sp/></highlight><highlight class="stringliteral">&apos;KitchenQual&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><ref refid="namespacehouse_price_1a0be6b4ef729fb48e16a608bed8bf9b52" kindref="member">fill_na_with_mode</ref>(item3)</highlight></codeline>
<codeline lineno="109"><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal">data[</highlight><highlight class="stringliteral">&apos;Functional&apos;</highlight><highlight class="normal">]<sp/>=<sp/>data[</highlight><highlight class="stringliteral">&apos;Functional&apos;</highlight><highlight class="normal">].fillna(</highlight><highlight class="stringliteral">&quot;Typ&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight><highlight class="comment">#删除仅有一个值的,如何查找出某个特征中含有的值的类型较少？？</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal">data<sp/>=<sp/>data.drop([</highlight><highlight class="stringliteral">&apos;Utilities&apos;</highlight><highlight class="normal">],axis=1)</highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"></highlight></codeline>
<codeline lineno="115" refid="namespacehouse_price_1a288c776578ea8b8f3fd4b1777f4d7aba" refkind="member"><highlight class="normal">data_null<sp/>=<sp/>data.isnull().sum()/len(data)<sp/>*<sp/>100</highlight></codeline>
<codeline lineno="116"><highlight class="normal">data_null<sp/>=<sp/>data_null.drop(data_null[data_null<sp/>==<sp/>0].index).sort_values()</highlight></codeline>
<codeline lineno="117"><highlight class="normal">data_null</highlight></codeline>
<codeline lineno="118"><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"></highlight></codeline>
<codeline lineno="120"><highlight class="normal"></highlight><highlight class="comment">#<sp/>Create<sp/>new<sp/>features</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight><highlight class="comment">#<sp/>3*<sp/>Polynomials<sp/>on<sp/>the<sp/>top<sp/>10<sp/>existing<sp/>features</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal">data[</highlight><highlight class="stringliteral">&quot;OverallQual-s2&quot;</highlight><highlight class="normal">]<sp/>=<sp/>data[</highlight><highlight class="stringliteral">&quot;OverallQual&quot;</highlight><highlight class="normal">]<sp/>**<sp/>2</highlight></codeline>
<codeline lineno="123"><highlight class="normal">data[</highlight><highlight class="stringliteral">&quot;OverallQual-s3&quot;</highlight><highlight class="normal">]<sp/>=<sp/>data[</highlight><highlight class="stringliteral">&quot;OverallQual&quot;</highlight><highlight class="normal">]<sp/>**<sp/>3</highlight></codeline>
<codeline lineno="124"><highlight class="normal">data[</highlight><highlight class="stringliteral">&quot;OverallQual-Sq&quot;</highlight><highlight class="normal">]<sp/>=<sp/>np.sqrt(data[</highlight><highlight class="stringliteral">&quot;OverallQual&quot;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="125"><highlight class="normal">data[</highlight><highlight class="stringliteral">&quot;GrLivArea-2&quot;</highlight><highlight class="normal">]<sp/>=<sp/>data[</highlight><highlight class="stringliteral">&quot;GrLivArea&quot;</highlight><highlight class="normal">]<sp/>**<sp/>2</highlight></codeline>
<codeline lineno="126"><highlight class="normal">data[</highlight><highlight class="stringliteral">&quot;GrLivArea-3&quot;</highlight><highlight class="normal">]<sp/>=<sp/>data[</highlight><highlight class="stringliteral">&quot;GrLivArea&quot;</highlight><highlight class="normal">]<sp/>**<sp/>3</highlight></codeline>
<codeline lineno="127"><highlight class="normal">data[</highlight><highlight class="stringliteral">&quot;GrLivArea-Sq&quot;</highlight><highlight class="normal">]<sp/>=<sp/>np.sqrt(data[</highlight><highlight class="stringliteral">&quot;GrLivArea&quot;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="128"><highlight class="normal">data[</highlight><highlight class="stringliteral">&quot;ExterQual-2&quot;</highlight><highlight class="normal">]<sp/>=<sp/>data[</highlight><highlight class="stringliteral">&quot;ExterQual&quot;</highlight><highlight class="normal">]<sp/>**<sp/>2</highlight></codeline>
<codeline lineno="129"><highlight class="normal">data[</highlight><highlight class="stringliteral">&quot;ExterQual-3&quot;</highlight><highlight class="normal">]<sp/>=<sp/>data[</highlight><highlight class="stringliteral">&quot;ExterQual&quot;</highlight><highlight class="normal">]<sp/>**<sp/>3</highlight></codeline>
<codeline lineno="130"><highlight class="normal">data[</highlight><highlight class="stringliteral">&quot;ExterQual-Sq&quot;</highlight><highlight class="normal">]<sp/>=<sp/>np.sqrt(data[</highlight><highlight class="stringliteral">&quot;ExterQual&quot;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="131"><highlight class="normal">data[</highlight><highlight class="stringliteral">&quot;GarageCars-2&quot;</highlight><highlight class="normal">]<sp/>=<sp/>data[</highlight><highlight class="stringliteral">&quot;GarageCars&quot;</highlight><highlight class="normal">]<sp/>**<sp/>2</highlight></codeline>
<codeline lineno="132"><highlight class="normal">data[</highlight><highlight class="stringliteral">&quot;GarageCars-3&quot;</highlight><highlight class="normal">]<sp/>=<sp/>data[</highlight><highlight class="stringliteral">&quot;GarageCars&quot;</highlight><highlight class="normal">]<sp/>**<sp/>3</highlight></codeline>
<codeline lineno="133"><highlight class="normal">data[</highlight><highlight class="stringliteral">&quot;GarageCars-Sq&quot;</highlight><highlight class="normal">]<sp/>=<sp/>np.sqrt(data[</highlight><highlight class="stringliteral">&quot;GarageCars&quot;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="134"><highlight class="normal">data[</highlight><highlight class="stringliteral">&quot;KitchenQual-2&quot;</highlight><highlight class="normal">]<sp/>=<sp/>data[</highlight><highlight class="stringliteral">&quot;KitchenQual&quot;</highlight><highlight class="normal">]<sp/>**<sp/>2</highlight></codeline>
<codeline lineno="135"><highlight class="normal">data[</highlight><highlight class="stringliteral">&quot;KitchenQual-3&quot;</highlight><highlight class="normal">]<sp/>=<sp/>data[</highlight><highlight class="stringliteral">&quot;KitchenQual&quot;</highlight><highlight class="normal">]<sp/>**<sp/>3</highlight></codeline>
<codeline lineno="136"><highlight class="normal">data[</highlight><highlight class="stringliteral">&quot;KitchenQual-Sq&quot;</highlight><highlight class="normal">]<sp/>=<sp/>np.sqrt(data[</highlight><highlight class="stringliteral">&quot;KitchenQual&quot;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="137"><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight></codeline>
<codeline lineno="140"><highlight class="normal"></highlight></codeline>
<codeline lineno="141" refid="namespacehouse_price_1a11a87b394d204862f98625eb60c53322" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacehouse_price_1a11a87b394d204862f98625eb60c53322" kindref="member">num_transform</ref>(items):</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>item<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>items:</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[item]<sp/>=<sp/>data[item].apply(str)</highlight></codeline>
<codeline lineno="144"><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"></highlight></codeline>
<codeline lineno="146" refid="namespacehouse_price_1a948d9e05445d922fd05e84f1e6c6d659" refkind="member"><highlight class="normal">item4<sp/>=<sp/>[</highlight><highlight class="stringliteral">&apos;MSSubClass&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;OverallCond&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;YrSold&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;MoSold&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><ref refid="namespacehouse_price_1a11a87b394d204862f98625eb60c53322" kindref="member">num_transform</ref>(item4)</highlight></codeline>
<codeline lineno="148"><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"></highlight></codeline>
<codeline lineno="150"><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>sklearn.preprocessing<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>LabelEncoder</highlight></codeline>
<codeline lineno="152"><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal"></highlight></codeline>
<codeline lineno="154" refid="namespacehouse_price_1a8de3d5f06217b2f4fe05fae0fa98fd72" refkind="member"><highlight class="normal">cols<sp/>=<sp/>(</highlight><highlight class="stringliteral">&apos;FireplaceQu&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;BsmtQual&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;BsmtCond&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;GarageQual&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;GarageCond&apos;</highlight><highlight class="normal">,<sp/></highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;ExterQual&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;ExterCond&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;HeatingQC&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;PoolQC&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;KitchenQual&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;BsmtFinType1&apos;</highlight><highlight class="normal">,<sp/></highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;BsmtFinType2&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;Functional&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;Fence&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;BsmtExposure&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;GarageFinish&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;LandSlope&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;LotShape&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;PavedDrive&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;Street&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;Alley&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;CentralAir&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;MSSubClass&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;OverallCond&apos;</highlight><highlight class="normal">,<sp/></highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;YrSold&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;MoSold&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="159"><highlight class="normal"></highlight></codeline>
<codeline lineno="160"><highlight class="normal"></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>c<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>cols:</highlight></codeline>
<codeline lineno="161" refid="namespacehouse_price_1acaad5b7c07f69732f179446ba9c176a4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>lbl<sp/>=<sp/>LabelEncoder()</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/>data[c]<sp/>=lbl.fit_transform(list(data[c].values))</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="164"><highlight class="normal"></highlight></codeline>
<codeline lineno="165"><highlight class="normal"></highlight></codeline>
<codeline lineno="166"><highlight class="normal">data[</highlight><highlight class="stringliteral">&apos;TotalSF&apos;</highlight><highlight class="normal">]<sp/>=<sp/>data[</highlight><highlight class="stringliteral">&apos;TotalBsmtSF&apos;</highlight><highlight class="normal">]<sp/>+<sp/>data[</highlight><highlight class="stringliteral">&apos;1stFlrSF&apos;</highlight><highlight class="normal">]<sp/>+<sp/>data[</highlight><highlight class="stringliteral">&apos;2ndFlrSF&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="167"><highlight class="normal"></highlight></codeline>
<codeline lineno="168"><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal"></highlight></codeline>
<codeline lineno="170" refid="namespacehouse_price_1ab98d4c390bdc3c07a72f7897443875ac" refkind="member"><highlight class="normal">numeric_feats<sp/>=<sp/>data.dtypes[data.dtypes<sp/>!=<sp/></highlight><highlight class="stringliteral">&apos;object&apos;</highlight><highlight class="normal">].index</highlight></codeline>
<codeline lineno="171"><highlight class="normal"></highlight></codeline>
<codeline lineno="172" refid="namespacehouse_price_1a6881f212f55babdda37320fed838460c" refkind="member"><highlight class="normal">skewed_feats<sp/>=<sp/>data[numeric_feats].apply(</highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>x:<sp/>skew(x.dropna())).sort_values(ascending=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="173" refid="namespacehouse_price_1ab6345cc2ade0fb9a6972f1c2637614cf" refkind="member"><highlight class="normal">skewness<sp/>=<sp/>pd.DataFrame({</highlight><highlight class="stringliteral">&apos;skew&apos;</highlight><highlight class="normal">:skewed_feats})</highlight></codeline>
<codeline lineno="174"><highlight class="normal">skewness.head(10)</highlight></codeline>
<codeline lineno="175"><highlight class="normal"></highlight></codeline>
<codeline lineno="176"><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal">skewness<sp/>=<sp/>skewness[abs(skewness)<sp/>&gt;<sp/>0.75]</highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight></codeline>
<codeline lineno="179"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>scipy.special<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>boxcox1p</highlight></codeline>
<codeline lineno="180" refid="namespacehouse_price_1a1e3a8acb8765b60d36c863e5c8eb0cc2" refkind="member"><highlight class="normal">skewed_features<sp/>=<sp/>skewness.index</highlight></codeline>
<codeline lineno="181" refid="namespacehouse_price_1ae603694316b9d171aeb375a958b75c67" refkind="member"><highlight class="normal">lam<sp/>=<sp/>0.15</highlight></codeline>
<codeline lineno="182"><highlight class="normal"></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>feat<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>skewed_features:</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#all_data[feat]<sp/>+=<sp/>1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/>data[feat]<sp/>=<sp/>boxcox1p(data[feat],<sp/>lam)</highlight></codeline>
<codeline lineno="185"><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"></highlight></codeline>
<codeline lineno="188"><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal">data<sp/>=<sp/>pd.get_dummies(data)</highlight></codeline>
<codeline lineno="190"><highlight class="normal"></highlight></codeline>
<codeline lineno="191"><highlight class="normal">train<sp/>=<sp/>data[:ntrain]</highlight></codeline>
<codeline lineno="192"><highlight class="normal">test<sp/>=<sp/>data[ntrain:]</highlight></codeline>
<codeline lineno="193"><highlight class="normal">y_train.shape</highlight></codeline>
<codeline lineno="194"><highlight class="normal"></highlight></codeline>
<codeline lineno="195"><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"></highlight></codeline>
<codeline lineno="197" refid="namespacehouse_price_1ac769a88bb6cd3c5207a2949478a45e2e" refkind="member"><highlight class="normal">data2<sp/>=<sp/>train</highlight></codeline>
<codeline lineno="198"><highlight class="normal">data2[</highlight><highlight class="stringliteral">&apos;SalePrice&apos;</highlight><highlight class="normal">]<sp/>=<sp/>y_train</highlight></codeline>
<codeline lineno="199"><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"></highlight></codeline>
<codeline lineno="203"><highlight class="normal"></highlight><highlight class="comment">#print(data2)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="204"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacespeedml_1_1tuning" kindref="compound">speedml.tuning</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>auto_tuning</highlight></codeline>
<codeline lineno="205"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>xgboost.sklearn<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>XGBRegressor</highlight></codeline>
<codeline lineno="206"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>sklearn<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>cross_validation,<sp/>metrics</highlight></codeline>
<codeline lineno="207"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>sklearn.cross_validation<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>train_test_split</highlight></codeline>
<codeline lineno="208"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>collections<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>defaultdict,<sp/>OrderedDict</highlight></codeline>
<codeline lineno="209" refid="namespacehouse_price_1a7fbdafb7abcd9758e50762e70ea0ae92" refkind="member"><highlight class="normal">param_test4<sp/>=<sp/>OrderedDict()</highlight></codeline>
<codeline lineno="210"><highlight class="normal">param_test4[</highlight><highlight class="stringliteral">&apos;n_estimators&apos;</highlight><highlight class="normal">]=(15,<sp/>200,<sp/>2,<sp/>10000)</highlight></codeline>
<codeline lineno="211"><highlight class="normal">param_test4[</highlight><highlight class="stringliteral">&apos;max_depth&apos;</highlight><highlight class="normal">]=(3,<sp/>10,<sp/>2,<sp/>1000)</highlight></codeline>
<codeline lineno="212"><highlight class="normal">param_test4[</highlight><highlight class="stringliteral">&apos;min_child_weight&apos;</highlight><highlight class="normal">]=(0.01,<sp/>10,<sp/>0.00001,<sp/>10000)</highlight></codeline>
<codeline lineno="213"><highlight class="normal">param_test4[</highlight><highlight class="stringliteral">&apos;gamma&apos;</highlight><highlight class="normal">]=(0,<sp/>1,<sp/>-1,<sp/>-1)</highlight></codeline>
<codeline lineno="214"><highlight class="normal">param_test4[</highlight><highlight class="stringliteral">&apos;subsample&apos;</highlight><highlight class="normal">]=(0.5,<sp/>0.9,<sp/>0.001,<sp/>1)</highlight></codeline>
<codeline lineno="215"><highlight class="normal">param_test4[</highlight><highlight class="stringliteral">&apos;colsample_bytree&apos;</highlight><highlight class="normal">]=(0.5,<sp/>0.9,<sp/>0.001,<sp/>1)</highlight></codeline>
<codeline lineno="216"><highlight class="normal">param_test4[</highlight><highlight class="stringliteral">&apos;scale_pos_weight&apos;</highlight><highlight class="normal">]=(0.1,<sp/>10,<sp/>0.001,<sp/>100)</highlight></codeline>
<codeline lineno="217"><highlight class="normal">param_test4[</highlight><highlight class="stringliteral">&apos;learning_rate&apos;</highlight><highlight class="normal">]=(0.05,<sp/>0.3,<sp/>0.0001,<sp/>0.9)</highlight></codeline>
<codeline lineno="218" refid="namespacehouse_price_1a7df313c1020e897a101270c9ff7b9bdd" refkind="member"><highlight class="normal">estimator<sp/>=<sp/>XGBRegressor</highlight></codeline>
<codeline lineno="219" refid="namespacehouse_price_1a8e253de5b3f0e58d818aa62bc0ed10ac" refkind="member"><highlight class="normal">init_param<sp/>=<sp/>{</highlight><highlight class="stringliteral">&apos;learning_rate&apos;</highlight><highlight class="normal">:<sp/>0.1,<sp/></highlight><highlight class="stringliteral">&apos;n_estimators&apos;</highlight><highlight class="normal">:<sp/>15,</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;max_depth&apos;</highlight><highlight class="normal">:<sp/>5,<sp/></highlight><highlight class="stringliteral">&apos;min_child_weight&apos;</highlight><highlight class="normal">:<sp/>0.9,<sp/></highlight><highlight class="stringliteral">&apos;gamma&apos;</highlight><highlight class="normal">:<sp/>0,</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;subsample&apos;</highlight><highlight class="normal">:<sp/>0.8,<sp/></highlight><highlight class="stringliteral">&apos;colsample_bytree&apos;</highlight><highlight class="normal">:<sp/>0.8,</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;nthread&apos;</highlight><highlight class="normal">:<sp/>4,<sp/></highlight><highlight class="stringliteral">&apos;scale_pos_weight&apos;</highlight><highlight class="normal">:<sp/>1,<sp/></highlight><highlight class="stringliteral">&apos;seed&apos;</highlight><highlight class="normal">:<sp/>27,<sp/></highlight><highlight class="stringliteral">&apos;eval_metric&apos;</highlight><highlight class="normal">:</highlight><highlight class="stringliteral">&apos;auc&apos;</highlight><highlight class="normal">}</highlight></codeline>
<codeline lineno="223"><highlight class="normal"></highlight></codeline>
<codeline lineno="224"><highlight class="normal"></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>__name__<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;__main__&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/>xgb<sp/>=<sp/><ref refid="namespacemodule2_1af0e3deeab0189382007cb9a36a9cce83" kindref="member">auto_tuning</ref>(estimator,<sp/>init_param,<sp/>param_test4,<sp/>data2,<sp/>target=</highlight><highlight class="stringliteral">&apos;SalePrice&apos;</highlight><highlight class="normal">)</highlight></codeline>
    </programlisting>
    <location file="D:/programs/Python3.5.2/Lib/site-packages/speedml/test/housePrice.py"/>
  </compounddef>
</doxygen>
